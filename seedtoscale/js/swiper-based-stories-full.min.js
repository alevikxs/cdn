// Swiper Based stories.js
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).createStoriesSlider=t()}(this,function(){return function e(t,i={}){let r=t.querySelector(".swiper"),{autoplayDuration:s=5e3,Swiper:l,EffectCube:n,onSlidesIndexesChange:o,onAutoplayStart:a,onAutoplayStop:d}=i,{enabled:c=!0}=i,u=0,p,f,v=[],$,h,y,m,E,b,S,g,q=(e,t)=>{let i=v.indexOf(e),r=void 0===t?s:t,l=parseInt(e.slides[e.activeIndex].getAttribute("data-duration"),10),n=e.slides[e.activeIndex].querySelector("video");return Number.isNaN(l)&&n&&(l=1e3*n.duration),!Number.isNaN(l)&&l>0&&void 0===t&&(r=l),S=r,e.storiesSliderAutoplayTimeout=setTimeout(()=>{e.isEnd?u===i&&(p.isEnd||p.slideNext()):e.slideNext()},r),a&&a(e),r},x=e=>{clearTimeout(e.storiesSliderAutoplayTimeout),d&&d(e)},A=e=>{x(e);let t=e.slides[e.activeIndex].querySelector("video");t&&(cancelAnimationFrame(f),t.pause());let i=S||s,r=parseInt(e.slides[e.activeIndex].getAttribute("data-duration"),10);if(Number.isNaN(r)&&(r=void 0),!r&&t&&(r=1e3*t.duration),S=i-(new Date().getTime()-b),e.isEnd&&S<0)return;S<0&&(S=0);let l=1-S/(r||s),n=e.el.querySelector(`.stories-slider-pagination-bullet:nth-child(${e.activeIndex+1})`);n.querySelector("span").remove(),n.insertAdjacentHTML("beforeend",`<span style="transform:translateX(${-100+100*l}%)"></span>`)},T=e=>{if(e.isEnd&&S<0)return;b=new Date().getTime(),q(e,S);let t=e.slides[e.activeIndex].querySelector("video");if(t)try{f=requestAnimationFrame(()=>{t.play()})}catch(i){}let r=e.el.querySelector(`.stories-slider-pagination-bullet:nth-child(${e.activeIndex+1}) > span`);r.style.transform="translateX(0%)",r.style.transitionDuration=`${S}ms`},_=e=>{x(e),q(e),b=new Date().getTime();let t=e.el.querySelector(".stories-slider-pagination-bullet-current");t&&t.classList.remove("stories-slider-pagination-bullet-current");let i=e.el.querySelector(`.stories-slider-pagination-bullet:nth-child(${e.activeIndex+1})`),r=e.slides[e.activeIndex].querySelector("video");if(r){r.currentTime=0;try{f=requestAnimationFrame(()=>{r.play()})}catch(s){}}e.slides.forEach(e=>{e.querySelectorAll("video").forEach(e=>{e!==r&&(e.currentTime=0,cancelAnimationFrame(f),e.pause())})}),v.filter((e,t)=>t!==u).forEach(e=>{e.el.querySelectorAll("video").forEach(e=>{cancelAnimationFrame(f),e.pause()})});let l=[...i.parentElement.children],n=[...l].filter((e,t)=>t<l.indexOf(i)),a=[...l].filter((e,t)=>t>l.indexOf(i));n.forEach(e=>{e.classList.add("stories-slider-pagination-bullet-viewed"),e.querySelectorAll("span").forEach(e=>e.remove()),e.insertAdjacentHTML("beforeend","<span></span>")}),a.forEach(e=>{e.classList.remove("stories-slider-pagination-bullet-viewed","stories-slider-pagination-bullet-current"),e.querySelectorAll("span").forEach(e=>e.remove()),e.insertAdjacentHTML("beforeend","<span></span>")}),i.classList.remove("stories-slider-pagination-bullet-viewed"),i.classList.add("stories-slider-pagination-bullet-current"),[...i.children].forEach(e=>e.remove()),i.insertAdjacentHTML("beforeend","<span></span>"),i.clientWidth,i.querySelector("span").style.transform="translateX(0%)",i.querySelector("span").style.transitionDuration=`${S}ms`,o&&(cancelAnimationFrame($),$=requestAnimationFrame(()=>{o(u,e.activeIndex)}))},w=e=>{let t=e.querySelectorAll(".swiper-slide"),i=document.createElement("div");i.classList.add("stories-slider-pagination");for(let r=0;r<t.length;r+=1){let s=document.createElement("div");s.classList.add("stories-slider-pagination-bullet"),s.appendChild(document.createElement("span")),i.appendChild(s)}e.appendChild(i)},L=e=>{e.el.querySelectorAll(".stories-slider-pagination, .stories-slider-pagination-bullet").forEach(e=>e.remove())},I=(e,t)=>{let i=e.querySelectorAll(".swiper-slide");i.forEach(e=>{let i=document.createElement("div"),r=document.createElement("div");i.classList.add("stories-slider-button","stories-slider-button-prev"),r.classList.add("stories-slider-button","stories-slider-button-next"),e.appendChild(i),e.appendChild(r);let s=()=>{if(!(E>200)){if(t.isBeginning){p.slidePrev();return}t.slidePrev()}},l=()=>{if(!(E>200)){if(t.isEnd){p.slideNext();return}t.slideNext()}};i.addEventListener("click",s),r.addEventListener("click",l)})},N=e=>{e.el.querySelectorAll(".stories-slider-button").forEach(e=>e.remove())};(()=>{let e=()=>{t.classList.add("stories-slider-perspective")},i=()=>{t.classList.remove("stories-slider-perspective")};p=new l(r,{modules:void 0!==n?[n]:[],effect:"cube",speed:500,threshold:5,cubeEffect:{shadow:!1},observer:!0,on:{transitionStart(){i()},sliderFirstMove(){i()},transitionEnd(){e()},init(t){t.params.resistanceRatio=.5,e()},slideChange(){let e=v[u];u=p.activeIndex;let t=v[u];x(e),q(t),_(t)}}})})();try{t.querySelectorAll(".swiper .swiper").forEach((e,t)=>{let i=new l(e,{speed:1,nested:!0,allowTouchMove:!1,observer:!0,on:{touchStart(e){h=!0,g=!1,y=new Date().getTime(),m=setTimeout(()=>{g=!0,A(e)},200)},touchEnd(e){clearTimeout(m),u===t&&h&&(E=new Date().getTime()-y,g&&T(e),g=!1,h=!1)},init(e){c&&(u!==t?x(e):requestAnimationFrame(()=>{_(e)}))},slideChange(e){_(e)}}});w(e),I(e,i),v.push(i)})}catch(C){console.log(C)}let M=()=>{c||v.forEach((e,t)=>{t===u&&_(e)})},j=()=>{c=!1,v.forEach((e,t)=>{e.el.querySelectorAll("video").forEach(e=>{cancelAnimationFrame(f),e.pause()}),t===u?A(e):x(e)})},H=()=>{p&&p.destroy&&p.destroy(),v.forEach(e=>{x(e),L(e),N(e),e.destroy&&e.destroy()})},O=(e,t)=>{if(p&&p.slideTo&&!p.destroyed&&p.slideTo(e,0),void 0!==t){let i=v[e];i.slideTo&&!i.destroyed&&(i.activeIndex===t?_(i):i.slideTo(t,0))}};return{el:t,mainSwiper:p,subSwipers:v,destroy:H,slideTo:O,enable:M,disable:j}}});
// Swiper Epyc Runner
function main(){let e=document.querySelector(".stories-slider");e.style.display="flex";let s=createStoriesSlider(e,{Swiper,autoplayDuration:5e3,enabled:!1});$("#stories-slider-wrapper")[0],document.querySelectorAll(".demo-stories a").forEach((t,i)=>{t.addEventListener("click",t=>{t.preventDefault(),e.classList.add("stories-slider-in"),s.enable(),s.slideTo(i,0)})}),e.addEventListener("click",t=>{t.target.matches(".stories-slider-close-button")&&(s.disable(),e.classList.add("stories-slider-out"))}),e.addEventListener("animationend",()=>{e.classList.contains("stories-slider-out")&&(e.classList.remove("stories-slider-in"),e.classList.remove("stories-slider-out"))}),window.hasOwnProperty("storiesLoaded")&&(window.storiesLoaded=!0)}$(document).ready(function(){window.storiesLoaded||main()});
